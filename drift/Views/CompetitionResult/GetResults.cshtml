@model System.Collections.Generic.List<drift.Data.Entity.CompetitionResultDto>

@{
    ViewBag.Title = "title";
    Layout = "_Layout";
}
@{
    var paticipants = Model.ToList();
    paticipants.Sort((a, b) => a.CarNumber.CompareTo(b.CarNumber));
}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">

function SelectWinners()
{
    let topEightIds = ['#1-1','#5-1','#9-1','#13-1','#17-1','#21-1','#25-1','#29-1'];
    let topFourIds = ['#3-2','#11-2','#19-2','#27-2','#35-1'];
    let topTwoIds = ['#7-3','#23-3'];
    let winnerId = ['#15-4'];
    topEightIds.forEach((topEight)=>{
        let i = parseInt(topEight.substr(topEight.indexOf('#')+1,topEight.indexOf('-')-1));
        let firstParticpantNumber =parseInt( $(`#${i-1}-0`).html());
        let secondParticpantNumber = parseInt($(`#${i+1}-0`).html());
        let  res = Math.min(firstParticpantNumber,secondParticpantNumber);
        $(`${topEight}`).html(res);
    });
    topFourIds.forEach((topFour)=>{
             let i = parseInt(topFour.substr(topFour.indexOf('#')+1,topFour.indexOf('-')-1));
             let firstParticpantNumber =parseInt( $(`#${i-2}-1`).html());
             let secondParticpantNumber = parseInt($(`#${i+2}-1`).html());
             let  res = Math.min(firstParticpantNumber,secondParticpantNumber);
             $(`${topFour}`).html(res);
    });
    topTwoIds.forEach((topTwo)=>{
             let i = parseInt(topTwo.substr(topTwo.indexOf('#')+1,topTwo.indexOf('-')-1));
             let firstParticpantNumber =parseInt( $(`#${i-4}-2`).html());
             let secondParticpantNumber = parseInt($(`#${i+4}-2`).html());
             let  res = Math.min(firstParticpantNumber,secondParticpantNumber);
             $(`${topTwo}`).html(res);
        });
     let firstParticpantNumber =parseInt( $(`#7-3`).html());
     let secondParticpantNumber = parseInt($(`#23-3`).html());
     let  res = Math.min(firstParticpantNumber,secondParticpantNumber);
     $(`${winnerId}`).html(res);
    
}
$(document).ready(function (){
    SelectWinners();
}
)

</script>

<table class="table">
    <thead>
    <tr>
        <th scope="col">Place</th>
        <th scope="col">UserName</th>
        <th scope="col">Number</th>
        <th scope="col">Car</th>
        <th scope="col">Qualification Score</th>
        <th scope="col">Main Phase Score</th>
        <th scope="col">Total Score</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var result in @Model)
    {
        <tr>
            <th scope="row">@result.Place</th>
            <td>@result.User.UserName</td>
            <td>@result.CarNumber</td>
            <td>@result.CarName</td>
            <td>@result.QualificationScore</td>
            <td>@result.MainPhaseScore</td>
            <td>@result.TotalScore</td>
        </tr>
    }
    </tbody>
</table>

<table class="table">
    <thead>
    <tr>
        <th scope="col">Top-16</th>
        <th scope="col">Top-8</th>
        <th scope="col">Top-4</th>
        <th scope="col">Top-2</th>
        <th scope="col">Winner</th>
        <th scope="col">Top-2</th>
        <th scope="col">Top-4</th>
        <th scope="col">Top-8</th>
        <th scope="col">Top-16</th>
    </tr>
    </thead>
    <tbody>
    @{ int a1 = -1, a2 = 15, b = 0, c = 0, d = 0; }
    @for (var i = 0; i < 32;)
    {
        <tr>
            <td id="@i-0">
                @{ a1++; }
                @Model[a1].Place
            </td>
            <td id="@i-1"></td>
            <td id="@i-2"></td>
            <td id="@i-3"></td>
            <td id="@i-4"></td>
            <td id="@i-5"></td>
            <td id="@i-6"></td>
            <td id="@i-7"></td>
            <td id="@i-8">
                @{ a1++; }
                @Model[a1].Place
            </td>
            @{ i++; }
        </tr>
        <tr>
            <td id="@(i)-0"></td>
            <td id="@(i)-1"></td>
            <td id="@(i)-2"></td>
            <td id="@(i)-3"></td>
            <td id="@(i)-4"></td>
            <td id="@(i)-5"></td>
            <td id="@(i)-6"></td>
            <td id="@(i)-7"></td>
            <td id="@(i)-8"></td>
            @{ i++; }
        </tr>
        <tr>
            <td id="@(i)-0">
                @{ a2++; }
                @Model[a2].Place
            </td>
            <td id="@(i)-1"></td>
            <td id="@(i)-2"></td>
            <td id="@(i)-3"></td>
            <td id="@(i)-4"></td>
            <td id="@(i)-5"></td>
            <td id="@(i)-6"></td>
            <td id="@(i)-7"></td>
            <td id="@(i)-8">
                @{ a2++; }
                @Model[a2].Place
            </td>
            @{ i++; }
        </tr>
        <tr>
            <td id="@(i)-0">
            </td>
            <td id="@(i)-1"></td>
            <td id="@(i)-2"></td>
            <td id="@(i)-3"></td>
            <td id="@(i)-4"></td>
            <td id="@(i)-5"></td>
            <td id="@(i)-6"></td>
            <td id="@(i)-7"></td>
            <td id="@(i)-8"></td>
            @{ i++; }
        </tr>
    }
    </tbody>
</table>